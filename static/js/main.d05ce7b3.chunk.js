(window.webpackJsonpbuki_test=window.webpackJsonpbuki_test||[]).push([[0],{17:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAABUklEQVQ4y2NgoBpoaGCSPzjJUObgDFWG//8ZMeSBYtJ7ZqkpHO03AKlFkVM91uajeaL2qu7p4v86p0v+aJ6ouaRypD0FJq92uDVN82T1FaDcXyD+D5Q/r3ik0xUiub9HRPtkxWO9M4X/kbHu6ZLfaodaqlSPtlfrnin+jS6vdbLqrtLuDn4GlcNtReiSCEPKPoMwLnmlw835DOrHGibgUkAIqx9tnMCgfLitmVwDlA+3tjDIH5tkqHOy9BOpmoFh9ENhf7sDJBaONk/SO1NEmvOPN6yAR6PKtknsGsfqdxKrGRilF2WOTZdGSQsqhyaJahyv20dIs9ap6usqB9sNsSZGoEv4VI81r9Y7XfQPq7NPNBxTOtmrhj9JA5Os6rHWUp3TpR8QAVb8S/Voy3ypMzO5iM4aSoe7XYBJ9iwoWSvubwshK3/JHOvjFL+4iJuBlgAAMy5tGMbP0m0AAAAASUVORK5CYII="},18:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABmJLR0QA/wD/AP+gvaeTAAABXUlEQVQ4y2NgoBpoaGDyPL3R0O7EGlWG//8ZMeSBYs4n16l5nVpvAFKLItd796zP8XfPr3758+v/21/f/xx59+xSz73zKTD5ifcvpB199+wKUO7vp9+//h98++R8460TrmDJyDObRa5/fvv4PxoAKvw97cHFqqkPLlYDDf6NLn/+46u7LmdW8TNMe3Cp6D8O8OLH188gjEt+4v3z+QzrXtyZ8J9MsObZnQkME+5daCbXgIn3LrYwZFw9aPj8x5dPpGp+/+vHj4LL+x3AAbnw8fVJ/0g0YMOLOyvg0ei5bRv7tpf3dxKr+cyHlxdDL2yWRkkLoee2ie549WAfIc0XPr6+XgT0NtbE6HliG9/CJ9dX//r7F6uPtr96cCz7+mE1/EkamGT77p0tffnz6wdEovr5a8mTm/N9z2zmIj5r3Drucvjd07PH3j2/1Hb7dAhZ+cvy2CpOt4s7uRloCQCaDD49MkE9ywAAAABJRU5ErkJggg=="},21:function(e,t,a){e.exports=a(33)},26:function(e,t,a){},32:function(e,t,a){},33:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(5),u=a.n(s),i=(a(26),a(7)),o=a(3),l=a(13),c=a(4),d=a(6);function m(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}var p="display_data",g="get_input_value",f="send_message",v="toggle_like",E="delete_message",h="enable_edit_mode",y="get_input_value_edit_mode",A="input_edit_mode_key_press";function b(){return function(e){fetch("https://api.dev.buki.com.ua/frontend_test").then(function(e){return e.json()}).then(function(t){var a=t.map(function(e){return function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?m(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):m(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}({},e,{like:!1,editMode:!1})});e(function(e){return{type:p,data:e}}(a))})}}function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),a.push.apply(a,n)}return a}function M(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach(function(t){Object(d.a)(e,t,a[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))})}return e}var C={data:null,usersCount:null,messagesCount:null,lastMessageTime:null,inputValue:[],editInputValue:[]},k={usersCount:function(e){var t=e.map(function(e){return e.user}),a=[],n=!0,r=!1,s=void 0;try{for(var u,i=function(){var e=u.value;0===a.length?a.push(e):void 0===a.find(function(t){return e===t})&&a.push(e)},o=t[Symbol.iterator]();!(n=(u=o.next()).done);n=!0)i()}catch(l){r=!0,s=l}finally{try{n||null==o.return||o.return()}finally{if(r)throw s}}return a.length},messagesCount:function(e){return e.map(function(e){return e.message}).length},lastMessageTime:function(e){var t=e.map(function(e){return e.created_at}).sort();return t[t.length-1]},getId:function(e){for(var t=[],a=0;a<e;a++){var n=Math.floor(10*Math.random());t.push("1234567890"[n])}return t.join("")},getMessageTime:function(){var e=new Date;return e.getFullYear()+"-"+(e.getMonth()+1)+"-"+e.getDate()+" "+(e.getHours()+":"+e.getMinutes()+":"+e.getSeconds())}};var j=Object(o.c)({mainChat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return M({},e,{data:t.data,usersCount:k.usersCount(t.data),messagesCount:k.messagesCount(t.data),lastMessageTime:k.lastMessageTime(t.data)});case g:return M({},e,{inputValue:t.value});case f:t.event.preventDefault();var a={id:k.getId(13),user:"Taylor",avatar:"https://i.pravatar.cc/300?img=12",created_at:k.getMessageTime(),message:"".concat(e.inputValue)};return M({},e,{data:[].concat(Object(c.a)(e.data),[a]),inputValue:[],usersCount:k.usersCount([].concat(Object(c.a)(e.data),[a])),messagesCount:k.messagesCount([].concat(Object(c.a)(e.data),[a])),lastMessageTime:k.lastMessageTime([].concat(Object(c.a)(e.data),[a]))});case v:var n=e.data.map(function(e){if(e.id===t.id){if(!1===e.like)return e.like=!0,e;if(!0===e.like)return e.like=!1,e}return e});return M({},e,{data:n});case E:var r=e.data.filter(function(e){return e.id!==t.id});return M({},e,{data:r,messagesCount:k.messagesCount(r),lastMessageTime:k.lastMessageTime(r)});case h:var s=e.data.map(function(e){return e.id===t.id?(e.editMode=!0,e):e});return M({},e,{data:s,editInputValue:t.value});case y:return M({},e,{editInputValue:t.value});case A:var u=e.data;return"Enter"===t.event.key&&""!==e.editInputValue&&(u=e.data.map(function(a){return a.id===t.id?(a.message=e.editInputValue,a.editMode=!1,a):a})),M({},e,{data:u});default:return e}}}),w=Object(o.d)(j,Object(o.a)(l.a));window.store=w;var P=w,V=(a(32),a(14)),_=a(15),N=a(19),D=a(16),T=a(20);var I=function(e){return r.a.createElement("header",null,r.a.createElement("div",{className:"header_logo_container"},r.a.createElement("div",{className:"logo"},r.a.createElement("a",{href:"#"},"My Chat")),r.a.createElement("div",{className:"header_info"},null===e.usersCount?r.a.createElement("div",null,"0"):r.a.createElement("div",null,e.usersCount," users"),null===e.messagesCount?r.a.createElement("div",null,"0"):r.a.createElement("div",null,e.messagesCount," messages"))),r.a.createElement("div",{className:"time_block"},"Last message: ",e.lastMessageTime))},L=a(17),B=a.n(L),S=a(18),J=a.n(S);var x=function(e){return r.a.createElement("div",{className:"chat_list"},null===e.data?r.a.createElement("div",null,"'Loading Please waite'"):e.data.map(function(t){return r.a.createElement("div",{key:t.id,className:"Taylor"===t.user?"top_item":"item"},r.a.createElement("div",{className:"avatar"},r.a.createElement("img",{src:t.avatar,alt:t.user})),r.a.createElement("div",{className:"item_content"},r.a.createElement("p",{className:"user_name"},t.user),r.a.createElement("p",{className:"created_at"},t.created_at),r.a.createElement("span",{className:"control_message"},t.editMode?r.a.createElement("input",{className:"input_edit_mode",value:e.editInputValue,onChange:function(t){return e.getInputValueEditMode(t)},onKeyPress:function(a){return e.inputEditModeKeyPress(a,t.id)}}):r.a.createElement("span",{className:"user_message"},t.message),r.a.createElement("div",{className:"edit_mode"},"Taylor"===t.user?r.a.createElement("span",{onClick:function(){return e.enableEditMode(t.id,t.message)}},"Edit"):"","Taylor"===t.user?r.a.createElement("span",{onClick:function(){return e.deleteMessage(t.id)}},"Delete"):"")),r.a.createElement("div",{className:"like_container"},"Taylor"===t.user?"":r.a.createElement("p",{onClick:function(){return e.toggleLike(t.id)}},t.like?r.a.createElement("img",{src:B.a}):r.a.createElement("img",{src:J.a})))))}))};var K=function(e){return r.a.createElement("div",{className:"messageInputBlock"},r.a.createElement("div",{className:"input_container"},r.a.createElement("input",{type:"text",placeholder:"Type something...",value:e.inputValue,onChange:function(t){return e.getInputValue(t)}})),r.a.createElement("div",{className:"button_container"},r.a.createElement("button",{onClick:function(t){return e.sendMessage(t)}},"Send")))};var R=function(e){return r.a.createElement("footer",null,r.a.createElement("div",{className:"footer_container"},r.a.createElement("nav",null,r.a.createElement("ul",null,r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Home")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"About")),r.a.createElement("li",null,r.a.createElement("a",{href:"#"},"Contact us")))),r.a.createElement("div",{className:"info"},r.a.createElement("p",null,"@ Copyright 2019"))))},G=function(e){function t(){return Object(V.a)(this,t),Object(N.a)(this,Object(D.a)(t).apply(this,arguments))}return Object(T.a)(t,e),Object(_.a)(t,[{key:"componentWillMount",value:function(){this.props.loadData()}},{key:"render",value:function(e){return console.log(this.props.data),r.a.createElement("div",{className:"wrapper"},r.a.createElement("div",{className:"content"},r.a.createElement(I,{usersCount:this.props.usersCount,messagesCount:this.props.messagesCount,lastMessageTime:this.props.lastMessageTime}),r.a.createElement(x,{data:this.props.data,toggleLike:this.props.toggleLike,deleteMessage:this.props.deleteMessage,enableEditMode:this.props.enableEditMode,editInputValue:this.props.editInputValue,getInputValueEditMode:this.props.getInputValueEditMode,inputEditModeKeyPress:this.props.inputEditModeKeyPress}),r.a.createElement(K,{getInputValue:this.props.getInputValue,sendMessage:this.props.sendMessage,inputValue:this.props.inputValue})),r.a.createElement(R,null))}}]),t}(n.Component);var H=Object(i.b)(function(e){return{data:e.mainChat.data,usersCount:e.mainChat.usersCount,messagesCount:e.mainChat.messagesCount,lastMessageTime:e.mainChat.lastMessageTime,inputValue:e.mainChat.inputValue,editInputValue:e.mainChat.editInputValue}},function(e){return{loadData:function(){return e(b())},getInputValue:function(t){return e((a=t.target.value,{type:g,value:a}));var a},sendMessage:function(t){return e(function(e){return{type:f,event:e}}(t))},toggleLike:function(t){return e(function(e){return{type:v,id:e}}(t))},deleteMessage:function(t){return e(function(e){return{type:E,id:e}}(t))},enableEditMode:function(t,a){return e(function(e,t){return{type:h,id:e,value:t}}(t,a))},getInputValueEditMode:function(t){return e((a=t.target.value,{type:y,value:a}));var a},inputEditModeKeyPress:function(t,a){return e(function(e,t){return{type:A,event:e,id:t}}(t,a))}}})(G);var Q=function(){return r.a.createElement(i.a,{store:P},r.a.createElement(H,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));u.a.render(r.a.createElement(Q,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[21,1,2]]]);
//# sourceMappingURL=main.d05ce7b3.chunk.js.map